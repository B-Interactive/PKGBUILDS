# Maintainers: EndeavourOS <info@endeavouros.com>
# Earlier maintainers: Portergos Linux <portergoslinux@gmail.com>

pkgname=endeavouros-mirrorlist
pkgver=23.5
pkgrel=1
pkgdesc="EndeavourOS mirrorlist"
arch=('any')
url=https://github.com/endeavouros-team/PKGBUILDS/tree/master/$pkgname
_url="https://raw.githubusercontent.com/endeavouros-team/PKGBUILDS/master/$pkgname"

license=('GPL3')
options=(!strip !emptydirs)
backup=("etc/pacman.d/$pkgname")  # to keep possibly ranked mirrorlist

conflicts_aarch64=(endeavouros-arm-mirrorlist)
conflicts_armv7h=(endeavouros-arm-mirrorlist)

source=($_url/$pkgname)
sha512sums=('6a5eead29f4e30c8af0edd078780f4eba0899b71e1ac4ac7d77b983f3c1588819be891b1b0e7d9e5c7488de1c3f67bcade06d1e7b059ef938c5c2d7e4191af5f')

_not_used_prepare() {
    # Create endeavouros-mirrorlist.offline for offline install.
    # Prefer mirrors that work well worldwide.

    local offline="endeavouros-mirrorlist.offline-install"
    local mirrorlist=endeavouros-mirrorlist

    printf "# EndeavourOS mirrorlist for offline install only.\n\n" > $offline
    cat $mirrorlist | sed -n '/^## Germany/,/^$/p'  >> $offline
    cat $mirrorlist | sed -n '/^## [A-Z].*/,$p'     >> $offline
}

package() {
 install -Dm644 "$srcdir/$pkgname" "$pkgdir/etc/pacman.d/$pkgname"
}
